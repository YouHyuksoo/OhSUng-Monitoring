# PLC 모니터링 시스템 구현 계획

## 목표 설명
제공된 주소를 기반으로 PLC 데이터를 폴링하고 대시보드에 표시하는 웹 기반 PLC 모니터링 시스템을 구축합니다. 이 시스템은 관리용 설정 페이지와 실시간 시각화를 위한 모니터링 페이지를 포함합니다.

## 사용자 검토 필요 사항
> [!IMPORTANT]
> **PLC 프로토콜**: 정확한 백엔드 구현을 위해 PLC 프로토콜(예: Modbus TCP, Mitsubishi MC Protocol, LS XGT 등)과 접속 정보(IP, Port)가 필요합니다. 현재는 **Mock PLC(가상 데이터)**를 구현하여 진행하겠습니다.
> **데이터베이스**: 요청하신 대로 복잡하지 않게 관리하기 위해 경량 로컬 데이터베이스(SQLite 또는 JSON 파일)를 사용하여 설정을 저장할 예정입니다.

## 변경 제안 사항

### 기술 스택
- **프레임워크**: Next.js (React) - 프론트엔드 및 API 라우트용.
- **스타일링**: Tailwind CSS - 빠르고 고급스러운 디자인 적용.
- **상태 관리**: React Context 또는 Zustand (필요 시).
- **차트**: Recharts 또는 Chart.js.
- **백엔드**: Next.js API Routes (Node.js) - 폴링 로직.

### 아키텍처
1.  **폴링 엔진**: 데이터를 가져오기 위한 백그라운드 프로세스(또는 클라이언트의 주기적 API 호출). Next.js API 라우트 특성상, 클라이언트에서 `setInterval`을 사용하여 PLC 읽기 API를 호출하는 방식을 사용하거나, 지속적인 백그라운드 폴링이 필수적인 경우 별도의 Node.js 스크립트를 사용할 수 있습니다. 간단한 구성을 위해 클라이언트 사이드 폴링 방식을 우선 고려합니다.
2.  **데이터 매핑**:
    -   **온도**: D400-D470 (현재값), D401-D471 (설정값).
    -   **전력**: D4000-D4038 (다양한 전력 지표).
    -   *참고*: 이미지의 주소 범위(D400 vs D4000)를 주의 깊게 매핑해야 합니다.

### 컴포넌트 구조

#### [NEW] `src/`
-   `app/`: Next.js App Router
    -   `page.tsx`: /monitoring 또는 대시보드로 리다이렉트.
    -   `monitoring/page.tsx`: 메인 대시보드.
    -   `settings/page.tsx`: 설정 페이지.
    -   `api/plc/route.ts`: PLC 데이터 조회 API.
    -   `api/settings/route.ts`: 설정 저장/로드 API.
-   `components/`:
    -   `Dashboard/`: 차트, 게이지, 상태 카드.
    -   `Settings/`: 주소 설정 폼, 알람 설정.
    -   `Layout/`: 사이드바/헤더.
-   `lib/`:
    -   `plc-connector.ts`: PLC 통신 인터페이스.
    -   `mock-plc.ts`: 시뮬레이션 로직.

## 검증 계획
### 자동화 테스트
-   데이터 매퍼(Raw 워드 값을 공학 단위로 변환)에 대한 단위 테스트.

### 수동 검증
-   **대시보드**: 가상 데이터를 통해 차트가 실시간으로 업데이트되는지 확인.
-   **설정**: 주소나 임계값을 변경하고 대시보드에 반영되는지(또는 알람이 울리는지) 확인.
